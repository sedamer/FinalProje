<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WorkFit Wellness</title>
  <link rel="icon" type="image/x-icon"
    href="faity_dumbbell_gym_sportswear_athlete_sport_hehy_workout_fitness_icon_228905.ico" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,300&family=Dancing+Script:wght@500&family=Raleway:wght@300&display=swap"
    rel="stylesheet" />
</head>
<style>
  body {
    margin: 0;
    padding: 0;
    background-color: aliceblue;
    background-size: cover;
    background: url('./img/aaasssttttttttttttttttt.jpg');
    font-family: "Cormorant Garamond", serif;
    font-family: "Dancing Script", cursive;
    font-family: "Raleway", sans-serif;
  }

  .navbar-brand,
  .nav-item {
    font-family: "Cormorant Garamond", serif;
    font-family: "Dancing Script", cursive;
    font-family: "Raleway", sans-serif;
    color: #000000;
  }

  .container-fluid {
    background-color: transparent;
  }

  .navbar-brand,
  .navbar-nav a {
    transition: transform 0.1s ease;
  }

  .navbar-brand:hover,
  .navbar-nav a:hover {
    transform: scale(1.1);
    /* Büyüme faktörünü ayarlayabilirsiniz */
    color:#E47D84;
  }
</style>

<body>
  <nav class="navbar navbar-expand-md navbar-light" style="background-color: transparent;">
    <div class="container-fluid">
      <a class="navbar-brand" href="home.html" style="font-size: 25px;">WorkFit Wellness</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class=" collapse navbar-collapse" id="navbarNavDropdown">

        <ul class="navbar-nav ms-auto ">
          <li class="nav-item">
            <a class="nav-link mx-2 active" aria-current="page" href="home.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-2" href="beslenme.html">Nutrition</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-2" href="egzersiz.html">Workout</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-2" href="recipe.html">Recipe</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-2" href="vki.html">BMI</a>
          </li>
          <li class="nav-item">
            <a class="nav-link mx-2" href="analiz.html">My Diary</a>
          </li>


          <li class="nav-item dropdown">
            <button id="userName" class="btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">

            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink"
              style="background-color:whitesmoke; border-color: aliceblue;">
              <li><a class="dropdown-item" href="profile.html">Profile</a></li>
              <li><a class="dropdown-item" href="editProfile.html">Edit Profile</a></li>
              <li><a class="dropdown-item" id="logoutLink" href="login.html">Log Out</a></li>
            </ul>
          </li>



        </ul>
      </div>
    </div>

  </nav>

  </nav>
  <div id="totalCaloriesContainer">
    <!-- Toplam kaloriler burada gösterilecek -->
  </div>

  <!-- Add this section to your analiz.html file where you want to display the nutrition data -->
  <div id="nutritionDataContainer">
    <!-- Nutrition data will be displayed here dynamically -->
  </div>
  <!-- Egzersiz (Workout) Verileri Konteynerı -->
  <div id="workoutDataContainer">
    <!-- Egzersiz verileri burada dinamik olarak gösterilecek -->
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        // Fetch the current user's information
        const currentUserResponse = await fetch("/get-current-user");
        const currentUser = await currentUserResponse.json();

        if (currentUser.error) {
          throw new Error(currentUser.error);
        }
        const totalCaloriesResponse = await fetch(`/getTotalCaloriesByUser?userName=${currentUser.name}`);
        const totalCaloriesData = await totalCaloriesResponse.json();
        console.log("Total Calories Data:", totalCaloriesData);
        const totalCaloriesContainer = document.getElementById("totalCaloriesContainer");

        // Display the total calories
        totalCaloriesContainer.innerHTML = `<p>Total Calories Burned Today: ${totalCaloriesData.totalCalories} calories</p>`;
        // Make a fetch request to your server endpoint that returns nutrition data

        
        const response = await fetch(`/getNutritionDataByUser?userName=${currentUser.name}`);
        const nutritionData = await response.json();
        console.log("Nutrition Data:", nutritionData);
        // Egzersiz verileri için fetch isteği
        const workoutResponse = await fetch(`/getWorkoutDataByUser?userName=${currentUser.name}`);
        const workoutData = await workoutResponse.json();
        console.log("Workout Data:", workoutData);

        // Get the container where you want to display the data
        const nutritionDataContainer = document.getElementById("nutritionDataContainer");

        if (nutritionData.length > 0) {
          // Create an HTML table to display the data
          const table = `
        <table style="border: 1px solid black; width:100%;">
          <tr>
            <th>Food</th>
            <th>Calories</th>
            <th>Protein(gr)</th>
            <th>Carbohydrate(gr)</th>
            <th>Fats(gr)</th>
            <th>Date</th>

          </tr>
          ${nutritionData.map(data => `
            <tr>
              <td>${data.food}</td>
              <td>${data.calories}</td>
              <td>${data.protein}</td>
              <td>${data.carbohydrate}</td>
              <td>${data.fats}</td>
              <td>${new Date(data.date).toLocaleDateString()}</td>

            </tr>`).join('')}
        </table>
      `;

          // Append the table to the container
          nutritionDataContainer.innerHTML = table;
        } else {
          // Display a message if there is no data
          nutritionDataContainer.innerHTML = "<p>No nutrition data available.</p>";
        }// Egzersiz verilerini göstermek için konteyner
        const workoutDataContainer = document.getElementById("workoutDataContainer");

        if (workoutData.length > 0) {
          const workoutTable = `
              <table style="border: 1px solid black; width:100%;">
                <!-- Tablo başlıkları -->
                <tr>
                  <th>Exercise</th>
                  <th>Calories Burned</th>
                  <th>Duration Minutes</th>
                  <th>Date</th>
                </tr>
                <!-- Her bir egzersiz verisi için bir satır oluştur -->
                ${workoutData.map(data => `
                  <tr>
                    <td>${data.exerciseName}</td>
                    <td>${data.caloriesBurned}</td>
                    <td>${data.durationMinutes}</td>
                    <td>${new Date(data.date).toLocaleDateString()}</td>
                  </tr>`).join('')}
              </table>
            `;
          workoutDataContainer.innerHTML = workoutTable;
        } else {
          workoutDataContainer.innerHTML = "<p>No workout data available.</p>";
        }
      } catch (error) {
        console.error("Error fetching nutrition data:", error);
        // Display an error message on the page if there is an issue
        nutritionDataContainer.innerHTML = "<p>Error fetching nutrition data.</p>";
      }
    });
  </script>

  <script src="navbar-script.js"></script>

</body>

</html>